diff --git a/importer/fileutils.cpp b/importer/fileutils.cpp
index 2aa18b4..1dbaa23 100644
--- a/importer/fileutils.cpp
+++ b/importer/fileutils.cpp
@@ -28,6 +28,7 @@ Foundation, Inc., 51 Franklin Street, Fifth Floor, Cambridge, MA 02110-1301, USA
 // KDE
 #include <KDebug>
 #include <KFileItem>
+#include <KTempDir>
 #include <KIO/CopyJob>
 #include <KIO/Job>
 #include <KIO/JobClasses>
@@ -128,14 +129,13 @@ QString createTempDir(const QString& baseDir, const QString& prefix, QString* er
 {
     Q_ASSERT(errorMessage);
 
-    QByteArray name = QFile::encodeName(baseDir + "/" + prefix + "XXXXXX");
-
-    if (!mkdtemp(name.data())) {
-        // Failure
-        *errorMessage = QString::fromLocal8Bit(::strerror(errno));
+    KTempDir td(baseDir + QLatin1String("/") + prefix);
+    td.setAutoRemove(false);
+    if(td.status() != 0) {
+        *errorMessage = strerror(td.status());
         return QString();
     }
-    return QFile::decodeName(name + '/');
+    return td.name();
 }
 
 } // namespace
