diff -Nru -x '*~' kdelibs-4.10.4.orig/kioslave/http/tests/CMakeLists.txt kdelibs-4.10.4/kioslave/http/tests/CMakeLists.txt
--- kdelibs-4.10.4.orig/kioslave/http/tests/CMakeLists.txt	2013-03-01 07:26:14.319777000 +0100
+++ kdelibs-4.10.4/kioslave/http/tests/CMakeLists.txt	2013-05-08 14:32:17.474771300 +0200
@@ -26,7 +26,7 @@
 
 )
 target_link_libraries(httpobjecttest ${KDE4_KDECORE_LIBS} ${QT_QTTEST_LIBRARY}
-                      ${QT_QTGUI_LIBRARY} ${KDE4_KIO_LIBS} kntlm)
+                      ${QT_QTGUI_LIBRARY} ${KDE4_KIO_LIBS} kntlm ${KDE4_SOLID_LIBS})
 if(GSSAPI_FOUND)
   target_link_libraries(httpobjecttest ${GSSAPI_LIBS})
 endif(GSSAPI_FOUND)
diff -Nru -x '*~' kdelibs-4.10.4.orig/kfile/kdiroperator.cpp kdelibs-4.10.4/kfile/kdiroperator.cpp
--- kdelibs-4.10.4.orig/kfile/kdiroperator.cpp	2013-03-01 07:26:14.011780000 +0100
+++ kdelibs-4.10.4/kfile/kdiroperator.cpp	2013-06-03 20:39:40.523920500 +0200
@@ -1040,7 +1040,7 @@
 
     newurl.adjustPath( KUrl::AddTrailingSlash );
 #ifdef Q_WS_WIN
-    QString pathstr = QDir::fromNativeSeparators(newurl.toLocalFile());
+    QString pathstr = (newurl.isLocalFile()) ? QDir::fromNativeSeparators(newurl.toLocalFile()) : newurl.path();
 #else
     QString pathstr = newurl.path();
 #endif
