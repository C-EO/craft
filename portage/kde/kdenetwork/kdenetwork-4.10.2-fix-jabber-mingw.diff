diff -Nru -x '*~' kdenetwork-4.10.2.orig/kopete/protocols/jabber/libiris/CMakeLists.txt kdenetwork-4.10.2/kopete/protocols/jabber/libiris/CMakeLists.txt
--- kdenetwork-4.10.2.orig/kopete/protocols/jabber/libiris/CMakeLists.txt	2013-03-01 06:22:13.593039000 +0100
+++ kdenetwork-4.10.2/kopete/protocols/jabber/libiris/CMakeLists.txt	2013-05-01 00:40:22.642991500 +0200
@@ -5,9 +5,12 @@
 FIND_PACKAGE(ZLIB REQUIRED)
 
 remove_definitions(-DQT_NO_HTTP)
-if(NOT MSVC)
+if(NOT WIN32)
   add_definitions(-fPIC)
-endif(NOT MSVC)
+endif(NOT WIN32)
+if(MINGW)
+  add_definitions(-DWIN32)
+endif(MINGW)
 
 include_directories(
 ${CMAKE_CURRENT_SOURCE_DIR}/iris
diff -Nru -x '*~' kdenetwork-4.10.2.orig/kopete/protocols/jabber/libiris/iris/jdns/jdns_p.h kdenetwork-4.10.2/kopete/protocols/jabber/libiris/iris/jdns/jdns_p.h
--- kdenetwork-4.10.2.orig/kopete/protocols/jabber/libiris/iris/jdns/jdns_p.h	2013-03-01 06:22:13.537040000 +0100
+++ kdenetwork-4.10.2/kopete/protocols/jabber/libiris/iris/jdns/jdns_p.h	2013-05-02 00:37:46.604719700 +0200
@@ -45,6 +45,7 @@
 #endif
 
 #ifdef JDNS_OS_WIN
+# include <winsock2.h>
 # include <windows.h>
 #endif
 
