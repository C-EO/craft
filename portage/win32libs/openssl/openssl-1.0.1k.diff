diff -Nru -x '*~' openssl-1.0.1k.orig/crypto/cversion.c openssl-1.0.1k/crypto/cversion.c
--- openssl-1.0.1k.orig/crypto/cversion.c	2015-01-08 15:00:56.000000000 +0100
+++ openssl-1.0.1k/crypto/cversion.c	2015-01-20 00:56:40.369599700 +0100
@@ -77,7 +77,7 @@
 	if (t == SSLEAY_CFLAGS)
 		{
 #ifdef CFLAGS
-		return(cflags);
+		return(CFLAGS);
 #else
 		return("compiler: information not available");
 #endif
diff -Nru -x '*~' openssl-1.0.1k.orig/util/mkbuildinf.pl openssl-1.0.1k/util/mkbuildinf.pl
--- openssl-1.0.1k.orig/util/mkbuildinf.pl	2015-01-08 15:00:56.000000000 +0100
+++ openssl-1.0.1k/util/mkbuildinf.pl	2015-01-20 00:56:58.906659900 +0100
@@ -7,7 +7,7 @@
 print <<"END_OUTPUT";
 #ifndef MK1MF_BUILD
     /* auto-generated by util/mkbuildinf.pl for crypto/cversion.c */
-    #define CFLAGS
+    #define CFLAGS cflags
     /*
      * Generate CFLAGS as an array of individual characters. This is a
      * workaround for the situation where CFLAGS gets too long for a C90 string
